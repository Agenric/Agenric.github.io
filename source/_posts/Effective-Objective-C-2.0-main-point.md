---
title: Effective Objective-C 2.0 要点摘录
date: 2017-04-18 21:27:03
categories:
 - 技术
tags:
 - iOS
---

* Objective-C 为 C 语言添加了面向对象的特性，是其超集。Objective-C 使用动态绑定的消息结构，也就是说在运行时才会检查对象类型。接收一条消息之后，究竟应执行何种代码，由运行期环境决定而非编译器决定。
* 理解 C 语言的核心概念有助于写好 Objective-C 程序。尤其要掌握内存模型与指针。
* 除非确有必要，否则不要引入头文件。一般来说，应在某个类的头文件中使用向前声明来提及别的类，并在实现文件中引入那些类的头文件。这样做可以尽量降低类之间的耦合。
* 有时无法使用向前声明，比如要声明某个类遵循一项协议。这种情况下，尽量把 “该类遵循某协议” 的这条声明移至 “class-continuation 分类” 中。如果不行的话，就把协议单独放在一个头文件中，然后将其引入。
* 应该使用字面量语法来创建字符串、数值、数组、字典。与创建此类对象的常规方法相比，这么做更加简明扼要。
* 应该通过下标操作来访问数组下标或字典中的键所对应的元素。
* 用字面量语法创建数组或字典时，若值中有 nil，则会抛出异常。因此务必确保值里不含 nil。
* 不要使用预处理指令定义常量。这样定义出来的常量不含类型信息，编译器只是会在编译前据此进行查找与替换的操作。即使有人重新定义了常量值，编译器也不会产生警告信息，这将导致应用程序中的常量值不一致。
* 在实现文件中使用 static const 来定义 “只在编译单元内可见的常量”（translation-unit-specific constant）。由于此类常量不在全局符号表中，所以无须为其名称加前缀。
* 在头文件中使用 exten 来声明全局变量，并在相关实现文件中定义其值。这种常量要出现在全局符号表中，所以其名称应加以区隔，通常用与之相关的类名做前缀。
* 应该用枚举来表示状态机的状态、传递给方法的选项以及状态码等值，给这些值起个易懂的名字。
* 如果把传递给某个方法的选项表示为枚举类型，而多个选项有可同时使用，那么就将各选项值定义为2的幂，以便通过按位或操作将其组合起来。
* 用 NS_ENUM 与 NS_OPTIONS 宏来定义枚举类型，并指明其底层的数据类型。这样做可以确保枚举是用开发者所选的底层数据类型实现出来的，而不会采用编译器所选的类型。
* 在处理枚举类型的 switch 语句中不要实现 default 分支。这样的话，加入新枚举之后，编译器就会提示开发者：switch 语句并未处理所有枚举。